---
title: iOS 프로그래밍 실무 11주차
author: Ki-Chang Kim (Panther K)
date: 2025-05-14 14:00 +0900
categories: [College, iOS]
tags: [college, ios, swift]
---

## OpenAPI 기반 iOS 앱 개발

### MovieData형 구조체

- ```swift
  struct MovieData: Codable {
    let boxOfficeResult: BoxOfficeResult
  }
  
  struct BoxOfficeResult: Codable {
      let dailyBoxOfficeList: [DailyBoxOfficeList]
  }
  
  struct DailyBoxOfficeList: Codable {
      let movieNm: String
      let audiCnt: String
      let audiAcc: String
      let rank: String
  }
  ```
- 서버 / API에서 받아오는 데이터는 일반적으로 JSON 포맷
- Codable 프로토콜 채택 시 다음을 자동으로 처리함
  - JSONDecoder 클래스가 JSON -> 구조체 / 클래스 (디코딩)
  - JSONEncoder 클래스가 구조체 / 클래스 -> JSON (인코딩)

### JSONDecoder

- ```swift
  do {
      let decodedData = try decoder.decode(MovieData.self, from: JSONdata)
      self.movieData = decodedData
      print(decodedData.boxOfficeResult.dailyBoxOfficeList[0].movieNm)
      print(decodedData.boxOfficeResult.dailyBoxOfficeList[0].audiAcc)
  } catch {
      print(error)
  }
  ```
- ![week11-1](/assets/img/post/25-05-14/1.png)
  - 클로저 내부에서 프로퍼티 접근 시 self 접두사를 사용해야 함
- decode 시 오류 처리 필요: Do~Try~Catch 사용
